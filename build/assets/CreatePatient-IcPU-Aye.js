import{r as p,j as e}from"./index-BQvi41i-.js";import{A as v,a as N,c as y}from"./DocsExample-_fROffxm.js";import{C as q}from"./index.esm-C8QhAwOE.js";import{c as w,a as i,u as A,C as d,o as S}from"./index.esm-BI5tGrkS.js";import{C as j}from"./CAlert-BrmTckJ1.js";import{C as P,a as E}from"./CCardBody-CFGSZ_SX.js";import{C as F}from"./CForm-D2kOCyf1.js";import{C as n,a as m}from"./CInputGroupText-DDx4Ewq2.js";import{C as o}from"./CFormInput-UsDlt-V0.js";import{C as U}from"./CFormLabel-D_S0RRtD.js";import{C as M}from"./CFormTextarea-Bn22ojlm.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlWrapper-C9fD3Vh-.js";import"./CFormControlValidation-BKQM0ZNT.js";const Q=()=>{const[c,x]=p.useState(""),[u,l]=p.useState(""),b=w().shape({username:i().min(3,"Username must be at least 3 characters long").required("Username is required"),password:i().min(6,"Password must be at least 6 characters long").required("Password is required"),mobile:i().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Mobile number is required"),aadhar:i().length(12,"Aadhar number must be exactly 12 digits").required("Aadhar number is required").test("is-unique","Aadhar number must be unique",async s=>(await(await fetch(`http://localhost:3001/check-aadhar?number=${s}`)).json()).isUnique),email:i().email("Invalid email address").required("Email is required"),address:i().required("Address is required")}),{control:a,handleSubmit:g,formState:{errors:r,isSubmitting:C}}=A({resolver:S(b)}),f=async s=>{x(""),l("");try{const t=await fetch("http://localhost:3001/CreatePatient",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),h=await t.json();t.ok?x("User added successfully!"):l(h.message||"User creation failed!")}catch(t){l("Error connecting to server"),console.error("Error connecting to server",t)}};return e.jsxs("div",{children:[e.jsx(v,{}),e.jsxs("div",{className:"wrapper d-flex flex-column min-vh-100",children:[e.jsx(N,{}),e.jsxs("div",{className:"container mt-4",children:[c&&e.jsx(j,{color:"success",children:c}),u&&e.jsx(j,{color:"danger",children:u}),e.jsx(P,{className:"p-4",children:e.jsx(E,{children:e.jsxs(F,{onSubmit:g(f),children:[e.jsx(d,{name:"username",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(n,{children:[e.jsx(m,{id:"username",children:"Patient Name"}),e.jsx(o,{...s,type:"text","aria-label":"Username","aria-describedby":"username"})]}),r.username&&e.jsx("div",{className:"text-danger",children:r.username.message})]})}),e.jsx(d,{name:"mobile",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(n,{children:[e.jsx(m,{id:"mobile",children:"Mobile Number"}),e.jsx(o,{...s,type:"tel","aria-label":"Mobile","aria-describedby":"mobile"})]}),r.mobile&&e.jsx("div",{className:"text-danger",children:r.mobile.message})]})}),e.jsx(d,{name:"aadhar",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(n,{children:[e.jsx(m,{id:"aadhar",children:"Aadhar Number"}),e.jsx(o,{...s,type:"text","aria-label":"Aadhar"})]}),r.aadhar&&e.jsx("div",{className:"text-danger",children:r.aadhar.message})]})}),e.jsx(d,{name:"email",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(n,{children:[e.jsx(m,{id:"email",children:"Email"}),e.jsx(o,{...s,type:"email","aria-label":"Email"})]}),r.email&&e.jsx("div",{className:"text-danger",children:r.email.message})]})}),e.jsx(d,{name:"address",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsx(U,{htmlFor:"address",children:"Address"}),e.jsx(M,{...s,id:"address",rows:3}),r.address&&e.jsx("div",{className:"text-danger",children:r.address.message})]})}),e.jsx(d,{name:"password",control:a,render:({field:s})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(n,{children:[e.jsx(m,{id:"inputGroup-sizing-default",children:"Password"}),e.jsx(o,{...s,type:"password","aria-label":"Password"})]}),r.password&&e.jsx("div",{className:"text-danger",children:r.password.message})]})}),e.jsx(q,{color:"primary",className:"px-4 d-block mx-auto",type:"submit",disabled:C,children:"Add Patient"})]})})})]}),e.jsx(y,{})]})]})};export{Q as default};
